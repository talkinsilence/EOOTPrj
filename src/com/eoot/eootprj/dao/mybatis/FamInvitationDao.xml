<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
    <mapper namespace="com.eoot.eootprj.dao.FamInvitationDao">
    
    	<insert id="insertInv" parameterType="Faminv">
    		insert into FamInvitations(askmid, acceptmid, askregdate, state) values(#{askmid}, #{acceptmid}, getDate(), 0);
    	</insert>
    	
    	<select id="getInvsMe" parameterType="String" resultType="FamInvJoinMember">
    		SELECT * FROM FAMINVITATIONS F INNER JOIN MEMBERS M ON F.ACCEPTMID = M.MID WHERE F.ASKMID = #{mid} AND state = 0; 
    	</select>
    	
    	<select id="getInvs" parameterType="String" resultType="FamInvJoinMember">
    		SELECT * FROM FAMINVITATIONS F INNER JOIN MEMBERS M ON F.ASKMID = M.MID WHERE F.ACCEPTMID = #{acceptmid} AND state = 0;
    	</select>
    	
    	<select id="getInv" parameterType="String" resultType="FamInv">
    		SELECT * FROM (SELECT * FROM FAMINVITATIONS WHERE ACCEPTMID = #{param1}) FAMINVITATIONS WHERE ASKMID = #{param2}
    	</select>
    </mapper>